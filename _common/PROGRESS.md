# Progress Reporting Protocol

コーディネーターおよびエージェントの進捗表示ルール。

---

## 60秒ルール

**60秒以上の沈黙を禁止する。**

長時間のツール実行やファイル処理中でも、現在のフェーズをユーザーに表示する。

---

## Phase Markers

各ステップの前後にフェーズ表示を行う:

### ステップ開始時

```
[Phase X/Y] {フェーズ名} 開始
```

### ステップ完了時

```
[Phase X/Y] {フェーズ名} 完了 → 次: {次のフェーズ名}
```

### 例

```
[Phase 1/4] 調査 開始
...（調査結果）...
[Phase 1/4] 調査 完了 → 次: 実装

[Phase 2/4] 実装 開始
...（実装内容）...
[Phase 2/4] 実装 完了 → 次: テスト
```

---

## Error Reporting

エラー発生時は **即座に** 以下を表示する:

```
[ERROR] {エラーの概要}
  詳細: {エラーメッセージ}
  発生箇所: {ファイルパス:行番号}
  対応: {次に取るアクション}
```

エラーを握りつぶさない。失敗を隠さない。

---

## AUTORUN Mode との統合

AUTORUN モードでは `_STEP_COMPLETE` 形式が優先される。
本プロトコルはそれを補完し、ステップ **内部** の進捗を表示する:

```
### Executing Step [2/4]: Builder

[Phase 1/3] ファイル構造分析 開始
...
[Phase 1/3] ファイル構造分析 完了

[Phase 2/3] 実装 開始
...
[Phase 2/3] 実装 完了

[Phase 3/3] lint/型チェック 開始
...
[Phase 3/3] lint/型チェック 完了

_STEP_COMPLETE:
  Agent: Builder
  Status: SUCCESS
  ...
```

---

## Long-Running Tasks

推定実行時間が30秒を超える場合:

1. 開始前に「実行中...」と表示する
2. 中間結果があれば随時表示する
3. 完了後に結果を表示する

タイムアウトした場合はエラーとして即時報告する。

---

## Coordinator Specific

コーディネーター（Nexus / 直接セッション）は以下を遵守する:

- エージェントチェーンの全体進捗を表示する
- 各エージェントの開始・完了を報告する
- ブロッカーが発生したら即座にユーザーに通知する
- 「考え中」「分析中」のような曖昧な表示を避け、具体的に何をしているか伝える
