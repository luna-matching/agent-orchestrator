# Report Templates for Harvest

レポート生成のテンプレート集。各形式の詳細な構造とサンプルを提供します。

---

## 1. Summary Report (サマリーレポート)

統計とカテゴリ分布の概要を提供するレポート。定期報告や状況確認に最適。

### Template

```markdown
# PR Summary Report

**Period:** {start_date} - {end_date}
**Repository:** {repository}
**Generated:** {generation_date}

---

## Overview

| Metric | Value |
|--------|-------|
| Total PRs | {total} |
| Merged | {merged} ({merged_percent}%) |
| Open | {open} ({open_percent}%) |
| Closed (not merged) | {closed} ({closed_percent}%) |

## Changes

| Metric | Value |
|--------|-------|
| Total Additions | +{additions} lines |
| Total Deletions | -{deletions} lines |
| Net Change | {net_change} lines |
| Files Changed | {files_changed} |

## By Category

| Category | Count | Percentage |
|----------|-------|------------|
| feat | {feat_count} | {feat_percent}% |
| fix | {fix_count} | {fix_percent}% |
| refactor | {refactor_count} | {refactor_percent}% |
| docs | {docs_count} | {docs_percent}% |
| test | {test_count} | {test_percent}% |
| chore | {chore_count} | {chore_percent}% |

## PR Size Distribution

| Size | Count | Percentage |
|------|-------|------------|
| XS (< 50 lines) | {xs_count} | {xs_percent}% |
| S (50-200) | {s_count} | {s_percent}% |
| M (200-500) | {m_count} | {m_percent}% |
| L (500-1000) | {l_count} | {l_percent}% |
| XL (> 1000) | {xl_count} | {xl_percent}% |

## Top Contributors

| Rank | Author | PRs | Additions | Deletions |
|------|--------|-----|-----------|-----------|
| 1 | @{author1} | {count1} | +{add1} | -{del1} |
| 2 | @{author2} | {count2} | +{add2} | -{del2} |
| 3 | @{author3} | {count3} | +{add3} | -{del3} |
| 4 | @{author4} | {count4} | +{add4} | -{del4} |
| 5 | @{author5} | {count5} | +{add5} | -{del5} |

## Highlights

### Most Active Day
- **{most_active_day}**: {day_pr_count} PRs merged

### Largest PR
- #{largest_pr_number}: {largest_pr_title} (+{largest_additions}/-{largest_deletions})

### Fastest Review
- #{fastest_pr_number}: Merged in {review_time} hours

---

*Generated by Harvest Agent*
```

### Sample Output

```markdown
# PR Summary Report

**Period:** 2024-01-01 - 2024-01-31
**Repository:** org/project
**Generated:** 2024-02-01

---

## Overview

| Metric | Value |
|--------|-------|
| Total PRs | 45 |
| Merged | 38 (84.4%) |
| Open | 5 (11.1%) |
| Closed (not merged) | 2 (4.4%) |

## Changes

| Metric | Value |
|--------|-------|
| Total Additions | +12,345 lines |
| Total Deletions | -3,456 lines |
| Net Change | +8,889 lines |
| Files Changed | 234 |

## By Category

| Category | Count | Percentage |
|----------|-------|------------|
| feat | 20 | 44.4% |
| fix | 12 | 26.7% |
| refactor | 8 | 17.8% |
| docs | 3 | 6.7% |
| test | 2 | 4.4% |
| chore | 0 | 0.0% |

## PR Size Distribution

| Size | Count | Percentage |
|------|-------|------------|
| XS (< 50 lines) | 15 | 33.3% |
| S (50-200) | 18 | 40.0% |
| M (200-500) | 8 | 17.8% |
| L (500-1000) | 3 | 6.7% |
| XL (> 1000) | 1 | 2.2% |

## Top Contributors

| Rank | Author | PRs | Additions | Deletions |
|------|--------|-----|-----------|-----------|
| 1 | @alice | 15 | +5,234 | -1,234 |
| 2 | @bob | 12 | +4,123 | -987 |
| 3 | @charlie | 8 | +2,345 | -654 |
| 4 | @dave | 6 | +543 | -321 |
| 5 | @eve | 4 | +100 | -260 |

## Highlights

### Most Active Day
- **2024-01-15**: 8 PRs merged

### Largest PR
- #123: Add user authentication module (+2,345/-567)

### Fastest Review
- #145: Fix typo in README - Merged in 0.5 hours

---

*Generated by Harvest Agent*
```

---

## 2. Detailed List (詳細一覧)

全PRの表形式一覧。監査やトラッキングに使用。

### Template

```markdown
# PR Detailed List

**Period:** {start_date} - {end_date}
**Repository:** {repository}
**Total:** {total_count} PRs

---

## Merged PRs ({merged_count})

| # | Title | Author | Labels | Created | Merged | Changes |
|---|-------|--------|--------|---------|--------|---------|
| {number} | {title} | @{author} | {labels} | {created} | {merged} | +{add}/-{del} |

## Open PRs ({open_count})

| # | Title | Author | Labels | Created | Updated | Changes |
|---|-------|--------|--------|---------|---------|---------|
| {number} | {title} | @{author} | {labels} | {created} | {updated} | +{add}/-{del} |

## Closed PRs (not merged) ({closed_count})

| # | Title | Author | Labels | Created | Closed | Reason |
|---|-------|--------|--------|---------|--------|--------|
| {number} | {title} | @{author} | {labels} | {created} | {closed} | {reason} |

---

*Generated by Harvest Agent*
```

### Sample Output

```markdown
# PR Detailed List

**Period:** 2024-01-01 - 2024-01-31
**Repository:** org/project
**Total:** 45 PRs

---

## Merged PRs (38)

| # | Title | Author | Labels | Created | Merged | Changes |
|---|-------|--------|--------|---------|--------|---------|
| 150 | feat: add OAuth2 support | @alice | feat, auth | 2024-01-28 | 2024-01-30 | +1,234/-456 |
| 149 | fix: resolve login timeout | @bob | fix, urgent | 2024-01-27 | 2024-01-27 | +45/-12 |
| 148 | refactor: extract auth utils | @charlie | refactor | 2024-01-25 | 2024-01-26 | +234/-189 |
| 147 | docs: update API reference | @dave | docs | 2024-01-24 | 2024-01-24 | +56/-23 |
| 146 | feat: add dashboard widgets | @alice | feat | 2024-01-23 | 2024-01-25 | +789/-123 |
| ... | ... | ... | ... | ... | ... | ... |

## Open PRs (5)

| # | Title | Author | Labels | Created | Updated | Changes |
|---|-------|--------|--------|---------|---------|---------|
| 155 | feat: implement notifications | @eve | feat, wip | 2024-01-30 | 2024-01-31 | +567/-89 |
| 154 | fix: memory leak in worker | @alice | fix | 2024-01-29 | 2024-01-30 | +23/-45 |
| ... | ... | ... | ... | ... | ... | ... |

## Closed PRs (not merged) (2)

| # | Title | Author | Labels | Created | Closed | Reason |
|---|-------|--------|--------|---------|--------|--------|
| 140 | feat: experimental caching | @bob | feat | 2024-01-15 | 2024-01-20 | Superseded by #145 |
| 138 | refactor: old approach | @charlie | refactor | 2024-01-10 | 2024-01-12 | Wrong approach |

---

*Generated by Harvest Agent*
```

---

## 3. Individual Work Report (個人作業報告)

特定メンバーの活動詳細。1on1やパフォーマンスレビューに使用。

### Template

```markdown
# Individual Work Report

**Author:** @{username}
**Period:** {start_date} - {end_date}
**Repository:** {repository}

---

## Summary

| Metric | Value |
|--------|-------|
| PRs Created | {created_count} |
| PRs Merged | {merged_count} |
| PRs Open | {open_count} |
| Total Additions | +{total_additions} |
| Total Deletions | -{total_deletions} |
| Average PR Size | {avg_size} lines |
| Average Merge Time | {avg_merge_time} |

## Activity by Week

| Week | Created | Merged | Changes |
|------|---------|--------|---------|
| {week1} | {created1} | {merged1} | +{add1}/-{del1} |
| {week2} | {created2} | {merged2} | +{add2}/-{del2} |
| {week3} | {created3} | {merged3} | +{add3}/-{del3} |
| {week4} | {created4} | {merged4} | +{add4}/-{del4} |

## Category Breakdown

| Category | Count | Percentage |
|----------|-------|------------|
| feat | {feat_count} | {feat_percent}% |
| fix | {fix_count} | {fix_percent}% |
| refactor | {refactor_count} | {refactor_percent}% |
| docs | {docs_count} | {docs_percent}% |
| test | {test_count} | {test_percent}% |

## PR List

### Merged

| # | Title | Created | Merged | Changes |
|---|-------|---------|--------|---------|
| {number} | {title} | {created} | {merged} | +{add}/-{del} |

### Open

| # | Title | Created | Status | Changes |
|---|-------|---------|--------|---------|
| {number} | {title} | {created} | {status} | +{add}/-{del} |

## Highlights

- **Most Impactful PR:** #{number} - {title}
- **Fastest Merged:** #{number} - Merged in {time}
- **Most Reviewed:** #{number} - {review_count} reviews

---

*Generated by Harvest Agent*
```

### Sample Output

```markdown
# Individual Work Report

**Author:** @alice
**Period:** 2024-01-01 - 2024-01-31
**Repository:** org/project

---

## Summary

| Metric | Value |
|--------|-------|
| PRs Created | 15 |
| PRs Merged | 14 |
| PRs Open | 1 |
| Total Additions | +5,234 |
| Total Deletions | -1,234 |
| Average PR Size | 430 lines |
| Average Merge Time | 1.5 days |

## Activity by Week

| Week | Created | Merged | Changes |
|------|---------|--------|---------|
| W1 (01-01 - 01-07) | 3 | 3 | +1,200/-300 |
| W2 (01-08 - 01-14) | 4 | 4 | +1,500/-400 |
| W3 (01-15 - 01-21) | 5 | 4 | +1,800/-350 |
| W4 (01-22 - 01-28) | 3 | 3 | +734/-184 |

## Category Breakdown

| Category | Count | Percentage |
|----------|-------|------------|
| feat | 8 | 53.3% |
| fix | 4 | 26.7% |
| refactor | 2 | 13.3% |
| docs | 1 | 6.7% |
| test | 0 | 0.0% |

## PR List

### Merged

| # | Title | Created | Merged | Changes |
|---|-------|---------|--------|---------|
| 150 | feat: add OAuth2 support | 2024-01-28 | 2024-01-30 | +1,234/-456 |
| 146 | feat: add dashboard widgets | 2024-01-23 | 2024-01-25 | +789/-123 |
| 143 | fix: memory leak in worker | 2024-01-20 | 2024-01-21 | +45/-23 |
| ... | ... | ... | ... | ... |

### Open

| # | Title | Created | Status | Changes |
|---|-------|---------|--------|---------|
| 154 | fix: memory leak in worker | 2024-01-29 | Review pending | +23/-45 |

## Highlights

- **Most Impactful PR:** #150 - feat: add OAuth2 support (+1,234 lines)
- **Fastest Merged:** #145 - fix: typo in README (Merged in 2 hours)
- **Most Reviewed:** #150 - 5 reviews from 3 reviewers

---

*Generated by Harvest Agent*
```

---

## 4. Release Notes (リリースノート)

Changelog形式のリリースノート。リリース作業やユーザー告知に使用。

### Template

```markdown
# Release Notes

## {version}

**Release Date:** {release_date}
**Tag:** {tag}
**Commits:** {commit_range}

---

### Features

{features_list}

### Bug Fixes

{bugfixes_list}

### Improvements

{improvements_list}

### Documentation

{docs_list}

### Breaking Changes

{breaking_changes_list}

### Dependencies

{dependencies_list}

---

### Contributors

{contributors_list}

### Full Changelog

{changelog_link}

---

*Generated by Harvest Agent*
```

### Sample Output

```markdown
# Release Notes

## v1.2.0

**Release Date:** 2024-02-01
**Tag:** v1.2.0
**Commits:** v1.1.0...v1.2.0

---

### Features

- Add OAuth2 authentication support (#150) - @alice
- Implement dashboard widgets (#146) - @alice
- Add user profile page (#144) - @bob
- Support multiple languages (#142) - @charlie

### Bug Fixes

- Fix login session timeout (#149) - @bob
- Resolve cart race condition (#147) - @dave
- Fix memory leak in background worker (#143) - @alice
- Correct date formatting in reports (#141) - @eve

### Improvements

- Refactor authentication module (#148) - @charlie
- Optimize database queries (#145) - @dave
- Improve error messages (#140) - @bob

### Documentation

- Update API reference (#147) - @dave
- Add deployment guide (#139) - @alice

### Breaking Changes

- Authentication API now requires `scope` parameter
  - Migration: Add `scope: "read"` to all auth requests
  - See [Migration Guide](./docs/migration-v1.2.md)

### Dependencies

- Upgraded React from 18.1.0 to 18.2.0
- Added `oauth2-client` v2.1.0
- Removed deprecated `legacy-auth` package

---

### Contributors

Thanks to all contributors who made this release possible:

@alice, @bob, @charlie, @dave, @eve

### Full Changelog

[v1.1.0...v1.2.0](https://github.com/org/project/compare/v1.1.0...v1.2.0)

---

*Generated by Harvest Agent*
```

---

## Output File Naming Convention

| Report Type | Pattern | Example |
|-------------|---------|---------|
| Summary | `pr-summary-{YYYY-MM-DD}.md` | `pr-summary-2024-02-01.md` |
| Detailed | `pr-list-{YYYY-MM-DD}.md` | `pr-list-2024-02-01.md` |
| Individual | `work-report-{username}-{YYYY-MM-DD}.md` | `work-report-alice-2024-02-01.md` |
| Release Notes | `release-notes-v{X.Y.Z}.md` | `release-notes-v1.2.0.md` |

---

## Category Detection Rules

PR titleからカテゴリを自動検出するルール:

| Prefix | Category | Example |
|--------|----------|---------|
| `feat:` / `feature:` | feat | feat: add login |
| `fix:` / `bugfix:` | fix | fix: resolve crash |
| `refactor:` | refactor | refactor: extract utils |
| `docs:` / `doc:` | docs | docs: update README |
| `test:` / `tests:` | test | test: add unit tests |
| `chore:` | chore | chore: update deps |
| `perf:` | perf | perf: optimize query |
| `style:` | style | style: format code |
| `ci:` | ci | ci: add workflow |
| `build:` | build | build: update webpack |

ラベルからの検出も併用:

| Label | Category |
|-------|----------|
| `enhancement`, `feature` | feat |
| `bug`, `bugfix` | fix |
| `refactoring` | refactor |
| `documentation` | docs |

---

---

## 5. Quality Trends Report (品質トレンドレポート)

Code review quality analysis integrated with Judge feedback data.

### Template

```markdown
# Code Quality Trends Report

**Period:** {start_date} - {end_date}
**Repository:** {repository}
**Data Source:** Judge Feedback Integration

---

## Quality Overview

| Metric | Current | Previous | Trend |
|--------|:-------:|:--------:|:-----:|
| Average Quality Score | {avg_score}/100 | {prev_avg_score}/100 | {trend_icon} |
| PR Approval Rate | {approval_rate}% | {prev_approval_rate}% | {trend_icon} |
| Avg Review Cycles | {avg_cycles} | {prev_avg_cycles} | {trend_icon} |
| Avg Review Time | {avg_review_hours}h | {prev_avg_review_hours}h | {trend_icon} |

## Quality Score Distribution

| Score Range | Count | Percentage |
|-------------|:-----:|:----------:|
| Excellent (90-100) | {excellent_count} | {excellent_percent}% |
| Good (80-89) | {good_count} | {good_percent}% |
| Acceptable (70-79) | {acceptable_count} | {acceptable_percent}% |
| Needs Improvement (<70) | {needs_improvement_count} | {needs_improvement_percent}% |

## Common Issues Found

| Issue Type | Count | Severity | Trend |
|------------|:-----:|:--------:|:-----:|
| {issue_type_1} | {count_1} | {severity_1} | {trend_1} |
| {issue_type_2} | {count_2} | {severity_2} | {trend_2} |
| {issue_type_3} | {count_3} | {severity_3} | {trend_3} |

## Quality by Category

| Category | PRs | Avg Score | Avg Cycles |
|----------|:---:|:---------:|:----------:|
| feat | {feat_count} | {feat_score} | {feat_cycles} |
| fix | {fix_count} | {fix_score} | {fix_cycles} |
| refactor | {refactor_count} | {refactor_score} | {refactor_cycles} |

## Quality by Contributor

| Author | PRs | Avg Score | Improvement |
|--------|:---:|:---------:|:-----------:|
| @{author_1} | {count_1} | {score_1} | {improvement_1} |
| @{author_2} | {count_2} | {score_2} | {improvement_2} |
| @{author_3} | {count_3} | {score_3} | {improvement_3} |

## PRs Requiring Attention

| # | Title | Score | Issues | Review Cycles |
|---|-------|:-----:|:------:|:-------------:|
| {number} | {title} | {score} | {issue_count} | {cycles} |

## Weekly Quality Trend

```
Week    Score   Approval   Cycles
{week_1}   {s1}      {a1}%      {c1}
{week_2}   {s2}      {a2}%      {c2}
{week_3}   {s3}      {a3}%      {c3}
{week_4}   {s4}      {a4}%      {c4}
```

## Recommendations

### Immediate Actions
{immediate_recommendations}

### Process Improvements
{process_recommendations}

### Training Opportunities
{training_recommendations}

---

*Quality data provided by Judge Agent*
*Generated by Harvest Agent*
```

### Sample Output

```markdown
# Code Quality Trends Report

**Period:** 2024-01-01 - 2024-01-31
**Repository:** org/project
**Data Source:** Judge Feedback Integration

---

## Quality Overview

| Metric | Current | Previous | Trend |
|--------|:-------:|:--------:|:-----:|
| Average Quality Score | 85/100 | 82/100 | ⬆️ |
| PR Approval Rate | 88% | 84% | ⬆️ |
| Avg Review Cycles | 1.4 | 1.6 | ⬆️ |
| Avg Review Time | 8.5h | 12.0h | ⬆️ |

## Quality Score Distribution

| Score Range | Count | Percentage |
|-------------|:-----:|:----------:|
| Excellent (90-100) | 12 | 26.7% |
| Good (80-89) | 20 | 44.4% |
| Acceptable (70-79) | 10 | 22.2% |
| Needs Improvement (<70) | 3 | 6.7% |

## Common Issues Found

| Issue Type | Count | Severity | Trend |
|------------|:-----:|:--------:|:-----:|
| Missing Tests | 8 | Medium | ⬇️ |
| Unclear Naming | 5 | Low | ➡️ |
| Security Concerns | 2 | High | ⬇️ |
| Performance Issues | 3 | Medium | ⬆️ |

## Quality by Category

| Category | PRs | Avg Score | Avg Cycles |
|----------|:---:|:---------:|:----------:|
| feat | 20 | 83 | 1.6 |
| fix | 15 | 88 | 1.2 |
| refactor | 10 | 86 | 1.3 |

## Quality by Contributor

| Author | PRs | Avg Score | Improvement |
|--------|:---:|:---------:|:-----------:|
| @alice | 15 | 89 | +5 |
| @bob | 12 | 84 | +3 |
| @charlie | 8 | 82 | +1 |
| @dave | 6 | 78 | -2 |
| @eve | 4 | 91 | +8 |

## PRs Requiring Attention

| # | Title | Score | Issues | Review Cycles |
|---|-------|:-----:|:------:|:-------------:|
| 142 | feat: add payment processing | 65 | 5 | 4 |
| 138 | refactor: legacy auth module | 68 | 4 | 3 |
| 135 | feat: bulk import feature | 70 | 3 | 3 |

## Weekly Quality Trend

```
Week         Score   Approval   Cycles
W1 (01-07)     82       84%       1.6
W2 (01-14)     84       86%       1.5
W3 (01-21)     86       88%       1.4
W4 (01-28)     88       90%       1.3
```

## Recommendations

### Immediate Actions
- Review payment processing PR (#142) with security focus
- Pair review for legacy auth refactoring (#138)
- Add test requirements for feature PRs

### Process Improvements
- Consider implementing mandatory test coverage checks
- Add security review checklist for payment-related changes
- Implement PR size limits to reduce review complexity

### Training Opportunities
- Security best practices workshop for the team
- Code review efficiency training
- Testing patterns for complex features

---

*Quality data provided by Judge Agent*
*Generated by Harvest Agent*
```

### Integration with Judge Feedback

When receiving `JUDGE_TO_HARVEST_FEEDBACK`, process as follows:

```bash
# Generate quality section from Judge feedback
generate_quality_section() {
  local feedback="$1"

  cat <<EOF
## Code Review Quality Trends

### Quality Metrics
$(jq -r '.quality_metrics | "- Approval Rate: \(.approval_rate * 100 | floor)%\n- Avg Review Cycles: \(.avg_review_cycles)\n- Avg Review Time: \(.avg_review_time_hours)h"' "$feedback")

### Common Issues
$(jq -r '.trends.common_issues | map("- **\(.type)**: \(.count) occurrences") | join("\n")' "$feedback")

### Improvement Suggestions
$(jq -r '.suggestions | map("- \(.)") | join("\n")' "$feedback")
EOF
}
```

---

## Localization

Header translation table for Japanese reports:

| English | Japanese |
|---------|----------|
| Summary Report | サマリーレポート |
| Detailed List | 詳細一覧 |
| Individual Work Report | 個人作業報告 |
| Release Notes | リリースノート |
| Period | 期間 |
| Repository | リポジトリ |
| Overview | 概要 |
| Total PRs | PR総数 |
| Merged | マージ済み |
| Open | オープン |
| Closed | クローズ |
| Changes | 変更 |
| Additions | 追加行数 |
| Deletions | 削除行数 |
| By Category | カテゴリ別 |
| Top Contributors | 貢献者ランキング |
| Features | 新機能 |
| Bug Fixes | バグ修正 |
| Improvements | 改善 |
| Breaking Changes | 破壊的変更 |
| Contributors | 貢献者 |
